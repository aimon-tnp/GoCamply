<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="623px" preserveAspectRatio="none" style="width:1396px;height:623px;background:#FFFFFF;" version="1.1" viewBox="0 0 1396 623" width="1396px" zoomAndPan="magnify"><title>Get Bookings (GET)</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="138.8857" x="624.8833" y="41.3125">Get Bookings (GET)</text><g><title>..javaScript..</title><rect fill="#FFFFFF" height="350.416" style="stroke:#181818;stroke-width:1;" width="10" x="223.0596" y="165.5527"/></g><g><title>..router..</title><rect fill="#FFFFFF" height="321.1055" style="stroke:#181818;stroke-width:1;" width="10" x="495.4287" y="194.8633"/></g><g><title>..middleware..</title><rect fill="#FFFFFF" height="35.3105" style="stroke:#181818;stroke-width:1;" width="10" x="599.6929" y="224.1738"/></g><g><title>..controllers..</title><rect fill="#FFFFFF" height="146.5527" style="stroke:#181818;stroke-width:1;" width="10" x="798.186" y="325.1055"/></g><g><title>..model..</title><rect fill="#FFFFFF" height="87.9316" style="stroke:#181818;stroke-width:1;" width="10" x="1178.313" y="354.416"/></g><g><title>..MongoDB..</title><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1;" width="10" x="1336.71" y="383.7266"/></g><g><title>Client</title><rect fill="#000000" fill-opacity="0.00000" height="390.7266" width="8" x="27.7524" y="134.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="31" x2="31" y1="134.2422" y2="524.9688"/></g><g><title>..javaScript..</title><rect fill="#000000" fill-opacity="0.00000" height="390.7266" width="8" x="224.0596" y="134.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="227.9736" x2="227.9736" y1="134.2422" y2="524.9688"/></g><g><title>..router..</title><rect fill="#000000" fill-opacity="0.00000" height="390.7266" width="8" x="496.4287" y="134.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="499.8164" x2="499.8164" y1="134.2422" y2="524.9688"/></g><g><title>..middleware..</title><rect fill="#000000" fill-opacity="0.00000" height="390.7266" width="8" x="600.6929" y="134.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="604.041" x2="604.041" y1="134.2422" y2="524.9688"/></g><g><title>..controllers..</title><rect fill="#000000" fill-opacity="0.00000" height="390.7266" width="8" x="799.186" y="134.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="802.46" x2="802.46" y1="134.2422" y2="524.9688"/></g><g><title>..model..</title><rect fill="#000000" fill-opacity="0.00000" height="390.7266" width="8" x="1179.313" y="134.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1182.6484" x2="1182.6484" y1="134.2422" y2="524.9688"/></g><g><title>..MongoDB..</title><rect fill="#000000" fill-opacity="0.00000" height="390.7266" width="8" x="1337.71" y="134.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1340.7676" x2="1340.7676" y1="134.2422" y2="524.9688"/></g><g class="participant participant-head" data-participant="client"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="53.5049" x="5" y="102.7539"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39.5049" x="12" y="123.2891">Client</text></g><g class="participant participant-tail" data-participant="client"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="53.5049" x="5" y="523.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39.5049" x="12" y="544.5039">Client</text></g><g class="participant participant-head" data-participant="server"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="94.1719" x="180.9736" y="86.2656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80.1719" x="187.9736" y="106.8008">&#171;javaScript&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45.8691" x="205.125" y="123.2891">:server</text></g><g class="participant participant-tail" data-participant="server"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="94.1719" x="180.9736" y="523.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80.1719" x="187.9736" y="544.5039">&#171;javaScript&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45.8691" x="205.125" y="560.9922">:server</text></g><g class="participant participant-head" data-participant="routerBookings"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="81.2246" x="459.8164" y="86.2656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.4512" x="472.2031" y="106.8008">&#171;router&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67.2246" x="466.8164" y="123.2891">:bookings</text></g><g class="participant participant-tail" data-participant="routerBookings"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="81.2246" x="459.8164" y="523.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.4512" x="472.2031" y="544.5039">&#171;router&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67.2246" x="466.8164" y="560.9922">:bookings</text></g><g class="participant participant-head" data-participant="mwProtect"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="107.3037" x="551.041" y="86.2656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93.3037" x="558.041" y="106.8008">&#171;middleware&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53.0127" x="578.1865" y="123.2891">:protect</text></g><g class="participant participant-tail" data-participant="mwProtect"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="107.3037" x="551.041" y="523.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93.3037" x="558.041" y="544.5039">&#171;middleware&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53.0127" x="578.1865" y="560.9922">:protect</text></g><g class="participant participant-head" data-participant="controllersBookings"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="101.4521" x="752.46" y="86.2656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87.4521" x="759.46" y="106.8008">&#171;controllers&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67.2246" x="769.5737" y="123.2891">:bookings</text></g><g class="participant participant-tail" data-participant="controllersBookings"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="101.4521" x="752.46" y="523.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87.4521" x="759.46" y="544.5039">&#171;controllers&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67.2246" x="769.5737" y="560.9922">:bookings</text></g><g class="participant participant-head" data-participant="modelBooking"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="73.3291" x="1146.6484" y="86.2656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.998" x="1154.814" y="106.8008">&#171;model&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59.3291" x="1153.6484" y="123.2891">:Booking</text></g><g class="participant participant-tail" data-participant="modelBooking"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="73.3291" x="1146.6484" y="523.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.998" x="1154.814" y="544.5039">&#171;model&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59.3291" x="1153.6484" y="560.9922">:Booking</text></g><g class="participant participant-head" data-participant="BookingsDatabase"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79.8848" x="1298.7676" y="114.8008">&#171;MongoDB&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67.2246" x="1305.0977" y="131.2891">:bookings</text><path d="M1323.71,65.2656 C1323.71,55.2656 1341.71,55.2656 1341.71,55.2656 C1341.71,55.2656 1359.71,55.2656 1359.71,65.2656 L1359.71,91.2656 C1359.71,101.2656 1341.71,101.2656 1341.71,101.2656 C1341.71,101.2656 1323.71,101.2656 1323.71,91.2656 L1323.71,65.2656" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M1323.71,65.2656 C1323.71,75.2656 1341.71,75.2656 1341.71,75.2656 C1341.71,75.2656 1359.71,75.2656 1359.71,65.2656" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="BookingsDatabase"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79.8848" x="1298.7676" y="537.5039">&#171;MongoDB&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67.2246" x="1305.0977" y="553.9922">:bookings</text><path d="M1323.71,566.9453 C1323.71,556.9453 1341.71,556.9453 1341.71,556.9453 C1341.71,556.9453 1359.71,556.9453 1359.71,566.9453 L1359.71,592.9453 C1359.71,602.9453 1341.71,602.9453 1341.71,602.9453 C1341.71,602.9453 1323.71,602.9453 1323.71,592.9453 L1323.71,566.9453" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M1323.71,566.9453 C1323.71,576.9453 1341.71,576.9453 1341.71,576.9453 C1341.71,576.9453 1359.71,576.9453 1359.71,566.9453" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g><title>..javaScript..</title><rect fill="#FFFFFF" height="350.416" style="stroke:#181818;stroke-width:1;" width="10" x="223.0596" y="165.5527"/></g><g><title>..router..</title><rect fill="#FFFFFF" height="321.1055" style="stroke:#181818;stroke-width:1;" width="10" x="495.4287" y="194.8633"/></g><g><title>..middleware..</title><rect fill="#FFFFFF" height="35.3105" style="stroke:#181818;stroke-width:1;" width="10" x="599.6929" y="224.1738"/></g><g><title>..controllers..</title><rect fill="#FFFFFF" height="146.5527" style="stroke:#181818;stroke-width:1;" width="10" x="798.186" y="325.1055"/></g><g><title>..model..</title><rect fill="#FFFFFF" height="87.9316" style="stroke:#181818;stroke-width:1;" width="10" x="1178.313" y="354.416"/></g><g><title>..MongoDB..</title><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1;" width="10" x="1336.71" y="383.7266"/></g><g class="message" data-participant-1="client" data-participant-2="server"><polygon fill="#181818" points="211.0596,161.5527,221.0596,165.5527,211.0596,169.5527,215.0596,165.5527" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="31.7524" x2="217.0596" y1="165.5527" y2="165.5527"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172.3071" x="38.7524" y="160.8105">req.get('/api/v1/bookings')</text></g><g class="message" data-participant-1="server" data-participant-2="routerBookings"><polygon fill="#181818" points="483.4287,190.8633,493.4287,194.8633,483.4287,198.8633,487.4287,194.8633" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="233.0596" x2="489.4287" y1="194.8633" y2="194.8633"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="243.3691" x="240.0596" y="190.1211">app.use('/api/v1/bookings', bookings)</text></g><g class="message" data-participant-1="routerBookings" data-participant-2="mwProtect"><polygon fill="#181818" points="587.6929,220.1738,597.6929,224.1738,587.6929,228.1738,591.6929,224.1738" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="505.4287" x2="593.6929" y1="224.1738" y2="224.1738"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74.312" x="512.4287" y="219.4316">protect(req)</text></g><g class="message" data-participant-1="mwProtect" data-participant-2="mwProtect"><line style="stroke:#181818;stroke-width:1;" x1="609.6929" x2="651.6929" y1="258.4844" y2="258.4844"/><line style="stroke:#181818;stroke-width:1;" x1="651.6929" x2="651.6929" y1="258.4844" y2="271.4844"/><line style="stroke:#181818;stroke-width:1;" x1="604.6929" x2="651.6929" y1="271.4844" y2="271.4844"/><polygon fill="#181818" points="614.6929,267.4844,604.6929,271.4844,614.6929,275.4844,610.6929,271.4844" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164.4932" x="616.6929" y="253.7422">verify token / set req.user</text></g><g class="message" data-participant-1="mwProtect" data-participant-2="routerBookings"><polygon fill="#181818" points="516.4287,291.7949,506.4287,295.7949,516.4287,299.7949,512.4287,295.7949" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="510.4287" x2="603.6929" y1="295.7949" y2="295.7949"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36.6006" x="522.4287" y="291.0527">next()</text></g><g class="message" data-participant-1="routerBookings" data-participant-2="controllersBookings"><polygon fill="#181818" points="786.186,321.1055,796.186,325.1055,786.186,329.1055,790.186,325.1055" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="505.4287" x2="792.186" y1="325.1055" y2="325.1055"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107.0151" x="512.4287" y="320.3633">getBookings(req)</text></g><g class="message" data-participant-1="controllersBookings" data-participant-2="modelBooking"><polygon fill="#181818" points="1166.313,350.416,1176.313,354.416,1166.313,358.416,1170.313,354.416" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="808.186" x2="1172.313" y1="354.416" y2="354.416"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="351.127" x="815.186" y="349.6738">if req.user.role !== 'admin' -&gt; find({ user: req.user.id })</text></g><g class="message" data-participant-1="modelBooking" data-participant-2="BookingsDatabase"><polygon fill="#181818" points="1324.71,379.7266,1334.71,383.7266,1324.71,387.7266,1328.71,383.7266" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1188.313" x2="1330.71" y1="383.7266" y2="383.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129.397" x="1195.313" y="378.9844">query user bookings</text></g><g class="message" data-participant-1="BookingsDatabase" data-participant-2="modelBooking"><polygon fill="#181818" points="1199.313,409.0371,1189.313,413.0371,1199.313,417.0371,1195.313,413.0371" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="1193.313" x2="1340.71" y1="413.0371" y2="413.0371"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58.3096" x="1205.313" y="408.2949">bookings</text></g><g class="message" data-participant-1="modelBooking" data-participant-2="controllersBookings"><polygon fill="#181818" points="819.186,438.3477,809.186,442.3477,819.186,446.3477,815.186,442.3477" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="813.186" x2="1182.313" y1="442.3477" y2="442.3477"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58.3096" x="825.186" y="437.6055">bookings</text></g><g class="message" data-participant-1="controllersBookings" data-participant-2="client"><polygon fill="#181818" points="42.7524,467.6582,32.7524,471.6582,42.7524,475.6582,38.7524,471.6582" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="36.7524" x2="802.186" y1="471.6582" y2="471.6582"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="335.1245" x="48.7524" y="466.916">response 200 { success: true, count, data: bookings }</text></g><path d="M612,484.6582 L612,509.6582 L993,509.6582 L993,494.6582 L983,484.6582 L612,484.6582" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M983,484.6582 L983,494.6582 L993,494.6582 L983,484.6582" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="360.4009" x="618" y="502.2266">If admin + campgroundId param -&gt; find by campground</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="142.9004" x="1245.752" y="14.668">GoCamply Sequence Diagram</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="54.8145" x="666.9189" y="613.6133">Page 1 of 1</text><!--SRC=[bLJ1Rk8m4BtxAsQH444GwFOOqHnQLgY7bIfrZtinoIHrczYkxT15LVzz9qu28MGFUq6svxrvpsySNf2dQ62d7dYfYoCyutk5Ca7O2fuRNh9CAKU09vuZJ3NzJa5bC2suTNx7d705mcI73kwLUXCojn3iVloQJnZJt3YH2CsbWyb38L2w2N0BYLzUbZURLtxWpuaHsiNnRnbPD0Sq7jyiXtYZAhBciVjMsQERyyxCa5MAD2tmWnlqJ6teVabZg_nuQdP3JgAaCweeqDXhkLxndvegnS8pMqGZLv-s1opbZk-vnHh-KybSRU-lfRh-snRCM9Da63S9mM8HWS7tLOukcAsv5kl3ztNNOZPd3IoCBoFoDAxrgh8uGbj2jvop0J6Cpw7vBcsS0PcOitFf0XU64P0BaHt1gJUKiAO1E- -R39W-ZNX3HI9B_EE2CIyZe_2kA8vktpWR0zOUUnFnH96TRAq8Z_3jxWvcF2s5dDM4JCWq-8Iw7fsH8eKlkds_6M67m_C2zBMPe-UVGcPNm71ehGxX11-xooOC_vDHf-VVaeSQj5f9ahwzkO5Fi5MIeBKHE5FXacAkf5j2_MJFNU6BCKbZ0rK_n16921upyD710XBwkybfW39zJ86-5bvsSSB-sAkolm00]--></g></svg>