<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="649px" preserveAspectRatio="none" style="width:1241px;height:649px;background:#FFFFFF;" version="1.1" viewBox="0 0 1241 649" width="1241px" zoomAndPan="magnify"><title>Login User (POST)</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="130.2314" x="551.4336" y="41.3125">Login User (POST)</text><g><title>..javaScript..</title><rect fill="#FFFFFF" height="376.416" style="stroke:#181818;stroke-width:1;" width="10" x="362.0796" y="165.5527"/></g><g><title>..router..</title><rect fill="#FFFFFF" height="347.1055" style="stroke:#181818;stroke-width:1;" width="10" x="574.1841" y="194.8633"/></g><g><title>..controllers..</title><rect fill="#FFFFFF" height="317.7949" style="stroke:#181818;stroke-width:1;" width="10" x="670.1357" y="224.1738"/></g><g><title>..controllers..</title><rect fill="#FFFFFF" height="280.4844" style="stroke:#181818;stroke-width:1;" width="10" x="675.1357" y="261.4844"/></g><g><title>..controllers..</title><rect fill="#FFFFFF" height="120.9316" style="stroke:#181818;stroke-width:1;" width="10" x="680.1357" y="421.0371"/></g><g><title>..controllers..</title><rect fill="#FFFFFF" height="34.3105" style="stroke:#181818;stroke-width:1;" width="10" x="685.1357" y="463.3477"/></g><g><title>..model..</title><rect fill="#FFFFFF" height="87.9316" style="stroke:#181818;stroke-width:1;" width="10" x="966.9146" y="295.7949"/></g><g><title>..MongoDB..</title><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1;" width="10" x="1181.1563" y="325.1055"/></g><g><title>Client</title><rect fill="#000000" fill-opacity="0.00000" height="416.7266" width="8" x="27.7524" y="134.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="31" x2="31" y1="134.2422" y2="550.9688"/></g><g><title>..javaScript..</title><rect fill="#000000" fill-opacity="0.00000" height="416.7266" width="8" x="363.0796" y="134.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="366.9937" x2="366.9937" y1="134.2422" y2="550.9688"/></g><g><title>..router..</title><rect fill="#000000" fill-opacity="0.00000" height="416.7266" width="8" x="575.1841" y="134.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="578.9585" x2="578.9585" y1="134.2422" y2="550.9688"/></g><g><title>..controllers..</title><rect fill="#000000" fill-opacity="0.00000" height="416.7266" width="8" x="671.1357" y="134.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="674.4097" x2="674.4097" y1="134.2422" y2="550.9688"/></g><g><title>..model..</title><rect fill="#000000" fill-opacity="0.00000" height="416.7266" width="8" x="967.9146" y="134.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="971.4155" x2="971.4155" y1="134.2422" y2="550.9688"/></g><g><title>..MongoDB..</title><rect fill="#000000" fill-opacity="0.00000" height="416.7266" width="8" x="1182.1563" y="134.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1185.2139" x2="1185.2139" y1="134.2422" y2="550.9688"/></g><g class="participant participant-head" data-participant="client"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="53.5049" x="5" y="102.7539"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39.5049" x="12" y="123.2891">Client</text></g><g class="participant participant-tail" data-participant="client"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="53.5049" x="5" y="549.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39.5049" x="12" y="570.5039">Client</text></g><g class="participant participant-head" data-participant="server"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="94.1719" x="319.9937" y="86.2656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80.1719" x="326.9937" y="106.8008">&#171;javaScript&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45.8691" x="344.145" y="123.2891">:server</text></g><g class="participant participant-tail" data-participant="server"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="94.1719" x="319.9937" y="549.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80.1719" x="326.9937" y="570.5039">&#171;javaScript&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45.8691" x="344.145" y="586.9922">:server</text></g><g class="participant participant-head" data-participant="routerAuth"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="70.4512" x="543.9585" y="86.2656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.4512" x="550.9585" y="106.8008">&#171;router&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="34.7744" x="561.7969" y="123.2891">:auth</text></g><g class="participant participant-tail" data-participant="routerAuth"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="70.4512" x="543.9585" y="549.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.4512" x="550.9585" y="570.5039">&#171;router&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="34.7744" x="561.7969" y="586.9922">:auth</text></g><g class="participant participant-head" data-participant="controllersAuth"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="101.4521" x="624.4097" y="86.2656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87.4521" x="631.4097" y="106.8008">&#171;controllers&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="34.7744" x="657.7485" y="123.2891">:auth</text></g><g class="participant participant-tail" data-participant="controllersAuth"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="101.4521" x="624.4097" y="549.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87.4521" x="631.4097" y="570.5039">&#171;controllers&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="34.7744" x="657.7485" y="586.9922">:auth</text></g><g class="participant participant-head" data-participant="modelUser"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="70.998" x="936.4155" y="86.2656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.998" x="943.4155" y="106.8008">&#171;model&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="34.7949" x="954.5171" y="123.2891">:User</text></g><g class="participant participant-tail" data-participant="modelUser"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="70.998" x="936.4155" y="549.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.998" x="943.4155" y="570.5039">&#171;model&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="34.7949" x="954.5171" y="586.9922">:User</text></g><g class="participant participant-head" data-participant="UsersDatabase"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79.8848" x="1143.2139" y="114.8008">&#171;MongoDB&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.9199" x="1162.6963" y="131.2891">:users</text><path d="M1168.1563,65.2656 C1168.1563,55.2656 1186.1563,55.2656 1186.1563,55.2656 C1186.1563,55.2656 1204.1563,55.2656 1204.1563,65.2656 L1204.1563,91.2656 C1204.1563,101.2656 1186.1563,101.2656 1186.1563,101.2656 C1186.1563,101.2656 1168.1563,101.2656 1168.1563,91.2656 L1168.1563,65.2656" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M1168.1563,65.2656 C1168.1563,75.2656 1186.1563,75.2656 1186.1563,75.2656 C1186.1563,75.2656 1204.1563,75.2656 1204.1563,65.2656" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="UsersDatabase"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79.8848" x="1143.2139" y="563.5039">&#171;MongoDB&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.9199" x="1162.6963" y="579.9922">:users</text><path d="M1168.1563,592.9453 C1168.1563,582.9453 1186.1563,582.9453 1186.1563,582.9453 C1186.1563,582.9453 1204.1563,582.9453 1204.1563,592.9453 L1204.1563,618.9453 C1204.1563,628.9453 1186.1563,628.9453 1186.1563,628.9453 C1186.1563,628.9453 1168.1563,628.9453 1168.1563,618.9453 L1168.1563,592.9453" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M1168.1563,592.9453 C1168.1563,602.9453 1186.1563,602.9453 1186.1563,602.9453 C1186.1563,602.9453 1204.1563,602.9453 1204.1563,592.9453" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g><title>..javaScript..</title><rect fill="#FFFFFF" height="376.416" style="stroke:#181818;stroke-width:1;" width="10" x="362.0796" y="165.5527"/></g><g><title>..router..</title><rect fill="#FFFFFF" height="347.1055" style="stroke:#181818;stroke-width:1;" width="10" x="574.1841" y="194.8633"/></g><g><title>..controllers..</title><rect fill="#FFFFFF" height="317.7949" style="stroke:#181818;stroke-width:1;" width="10" x="670.1357" y="224.1738"/></g><g><title>..controllers..</title><rect fill="#FFFFFF" height="280.4844" style="stroke:#181818;stroke-width:1;" width="10" x="675.1357" y="261.4844"/></g><g><title>..controllers..</title><rect fill="#FFFFFF" height="120.9316" style="stroke:#181818;stroke-width:1;" width="10" x="680.1357" y="421.0371"/></g><g><title>..controllers..</title><rect fill="#FFFFFF" height="34.3105" style="stroke:#181818;stroke-width:1;" width="10" x="685.1357" y="463.3477"/></g><g><title>..model..</title><rect fill="#FFFFFF" height="87.9316" style="stroke:#181818;stroke-width:1;" width="10" x="966.9146" y="295.7949"/></g><g><title>..MongoDB..</title><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1;" width="10" x="1181.1563" y="325.1055"/></g><g class="message" data-participant-1="client" data-participant-2="server"><polygon fill="#181818" points="350.0796,161.5527,360.0796,165.5527,350.0796,169.5527,354.0796,165.5527" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="31.7524" x2="356.0796" y1="165.5527" y2="165.5527"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="311.3271" x="38.7524" y="160.8105">req.post('/api/v1/auth/login') { email, password }</text></g><g class="message" data-participant-1="server" data-participant-2="routerAuth"><polygon fill="#181818" points="562.1841,190.8633,572.1841,194.8633,562.1841,198.8633,566.1841,194.8633" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="372.0796" x2="568.1841" y1="194.8633" y2="194.8633"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183.1045" x="379.0796" y="190.1211">app.use('/api/v1/auth', auth)</text></g><g class="message" data-participant-1="routerAuth" data-participant-2="controllersAuth"><polygon fill="#181818" points="658.1357,220.1738,668.1357,224.1738,658.1357,228.1738,662.1357,224.1738" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="584.1841" x2="664.1357" y1="224.1738" y2="224.1738"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="60.874" x="591.1841" y="219.4316">login(req)</text></g><g class="message" data-participant-1="controllersAuth" data-participant-2="controllersAuth"><line style="stroke:#181818;stroke-width:1;" x1="680.1357" x2="727.1357" y1="248.4844" y2="248.4844"/><line style="stroke:#181818;stroke-width:1;" x1="727.1357" x2="727.1357" y1="248.4844" y2="261.4844"/><line style="stroke:#181818;stroke-width:1;" x1="686.1357" x2="727.1357" y1="261.4844" y2="261.4844"/><polygon fill="#181818" points="696.1357,257.4844,686.1357,261.4844,696.1357,265.4844,692.1357,261.4844" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164.4868" x="692.1357" y="243.7422">validate email &amp; password</text></g><g class="message" data-participant-1="controllersAuth" data-participant-2="modelUser"><polygon fill="#181818" points="954.9146,291.7949,964.9146,295.7949,954.9146,299.7949,958.9146,295.7949" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="685.1357" x2="960.9146" y1="295.7949" y2="295.7949"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="234.7744" x="692.1357" y="291.0527">findOne({ email }).select('+password')</text></g><g class="message" data-participant-1="modelUser" data-participant-2="UsersDatabase"><polygon fill="#181818" points="1169.1563,321.1055,1179.1563,325.1055,1169.1563,329.1055,1173.1563,325.1055" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="976.9146" x2="1175.1563" y1="325.1055" y2="325.1055"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124.249" x="983.9146" y="320.3633">query user by email</text></g><g class="message" data-participant-1="UsersDatabase" data-participant-2="modelUser"><polygon fill="#181818" points="987.9146,350.416,977.9146,354.416,987.9146,358.416,983.9146,354.416" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="981.9146" x2="1185.1563" y1="354.416" y2="354.416"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180.2417" x="993.9146" y="349.6738">user (with hashed password)</text></g><g class="message" data-participant-1="modelUser" data-participant-2="controllersAuth"><polygon fill="#181818" points="696.1357,379.7266,686.1357,383.7266,696.1357,387.7266,692.1357,383.7266" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="690.1357" x2="970.9146" y1="383.7266" y2="383.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="27.2568" x="702.1357" y="378.9844">user</text></g><g class="message" data-participant-1="controllersAuth" data-participant-2="controllersAuth"><line style="stroke:#181818;stroke-width:1;" x1="685.1357" x2="732.1357" y1="408.0371" y2="408.0371"/><line style="stroke:#181818;stroke-width:1;" x1="732.1357" x2="732.1357" y1="408.0371" y2="421.0371"/><line style="stroke:#181818;stroke-width:1;" x1="691.1357" x2="732.1357" y1="421.0371" y2="421.0371"/><polygon fill="#181818" points="701.1357,417.0371,691.1357,421.0371,701.1357,425.0371,697.1357,421.0371" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197.9707" x="697.1357" y="403.2949">user.matchPassword(password)</text></g><g class="message" data-participant-1="controllersAuth" data-participant-2="controllersAuth"><line style="stroke:#181818;stroke-width:1;" x1="690.1357" x2="737.1357" y1="450.3477" y2="450.3477"/><line style="stroke:#181818;stroke-width:1;" x1="737.1357" x2="737.1357" y1="450.3477" y2="463.3477"/><line style="stroke:#181818;stroke-width:1;" x1="696.1357" x2="737.1357" y1="463.3477" y2="463.3477"/><polygon fill="#181818" points="706.1357,459.3477,696.1357,463.3477,706.1357,467.3477,702.1357,463.3477" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="242.7788" x="702.1357" y="445.6055">if match -&gt; sendTokenResponse(user)</text></g><g class="message" data-participant-1="controllersAuth" data-participant-2="client"><polygon fill="#181818" points="42.7524,493.6582,32.7524,497.6582,42.7524,501.6582,38.7524,497.6582" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="36.7524" x2="679.1357" y1="497.6582" y2="497.6582"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="415.7715" x="48.7524" y="492.916">response 200 { success: true, _id, name, telephone, email, token }</text></g><path d="M532,510.6582 L532,535.6582 L816,535.6582 L816,520.6582 L806,510.6582 L532,510.6582" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M806,510.6582 L806,520.6582 L816,520.6582 L806,510.6582" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="263.6689" x="538" y="528.2266">if missing creds -&gt; 400; if invalid -&gt; 401</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="142.9004" x="1090.1982" y="14.668">GoCamply Sequence Diagram</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="54.8145" x="589.1421" y="639.6133">Page 1 of 1</text><!--SRC=[ZLHVRzem47_tfpWXCH91W4vxOYZILgIzR2eQtTkawPeSYJV7Tcs72atzxhETZ3OCfBs0xVlzk-D4JLYIWK_g5XijZh2ZnvPaGR3XM1bis5ufvm5Rh0Z6sd-EGUrXBD2wU6EEEq4m-gmgBk6RzTXaUxUxJqUCQJIE5roZT32w5Poa6m5QAE9nM5wlV-81TuNXskNvTxdoIWSo4TyTp_56jJvPn6BhweZitZxuwpcwKD8P9GGPEwIyAbpYDQea4HcXjyY8J-76IdJuW9O2y8kIbTfyZD3M5st41fZTz336kiwplEi8fjCL67gSQsLTCbcWvel3pI94MuWmpqaAlu4Qv6866grzKgQ4PzQni_obswY4Mi-zyr1eCeFmbR9Nu2m_xphoesNYywJil7o5SK31_GoeomXlJY4l2Pp65gbxBiixIKdV7podSqk22Z-7wL-LISfUI5vXCCoeufVL726C6nwEdH8RehA1SvQjEdJon7sg6crDvIdrltsli-m2-t_74x3p1brHRtk7vBhL5Gs-XwWGwfPaUQz-aVnALYlfV-hWS5agBbfCR7eml5qk_JhPjYZ8sXKuqz8CVl1o1X8RVtH-_hfMqX_xdNF1p2ySa_vF05HOsJElBY2tbiiA2aEb3UxlbilteS1bt93kwORz0G00]--></g></svg>